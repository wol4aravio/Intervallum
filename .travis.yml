env:
  global:
    - secure: "Uz21rM7B2gPZeE57lira+pyiQFblmD4x0GHFdnBESuzSAH5crz+6TLR/lxoa09mRx6CqqXOGIDXwbHAxg8LL3BEOm9sIL1bOXmZyTp9uiSbpCPXVBGSjOYUfRF3K3ohVys8w177uWgooQEdj0K+Z0PmzeMAuVEigSsDt1SEq0TeQXlUefv1WtqIj5LTX56QXN9h+/59UYnVmF0WXUWQ5FIMO0MsRkWP9v6BgDI5xD0HjH+50Um8w2Fn3AjWK0FbUxXpmUShZr/qeexMNk/q15jS5N6OwbTdSm9yu/8dUTxrcLM9AxQ3QZHOdjldBFsXroV62ItQzUaGTmfFZDgk67Yp//uTJ2grkIrTy2rddhrFHT34Qpsm2CppKdSO/GmXJokobE1rq0lcsT2YbHZwnSccH+MaCzMLCbY623in/6S1xk0HvMDPtVZpMYpBnV07/mf0PCWuLTkSAfN9oq0c2nz+0Lh7FuWoCsRTpC40tpBZctaLQdeNWSaM5QP5amrdLMarMR14MvteEwSfAyRw5vlYPb6bUWcyACtZFPZ5vJjMsqXeu66fQNlyzorwfNIrvYQW6ywysocBp2i5vMfmpwa4Chqfb9Ut946ZX274vIIFZKhLaLZ5WK7nJznmJWOIcwbbBAXWLc7tcN5c8hDbPq/symvoDANqMQq/2y67zkdM="
    - secure: "XeJm8GMgLuaOrLx2MzZkBUi5MwPh6Gc8PysV1DEBqtNj4mFHha4DnYy0eG/RCWnirr1l1j0qBA/NwjZYCibXHqMH02yHiJbhzlF/n/3HKG2olE8pG3zlIbuz0PRvEnH+mghI4uXGklcZapduWqjI+UgO6YK+y4YSgI7Dzd9535FPSxANFXDQq/U+nx9aNzm60MoiSFAVQj1dbG0K+G2N+iqX1uEvglWsYFSQHfUsF2WdC/WUZlemttHn+ASv9eVLZWJWpAvClc8pc8oe1N+kYA5NAoqQIcEKxzgFBUW+jcUaH7SSL5GqT0rjpWeO0GmE9yLMPVNzdI+96fhara8nFYL4zx8WPwDPsbkV+5QkxMe0HAiouR1siueoAqe55eWcxxRJ3c78m/f2nj+Wc+lYdRFifIi3FjCbPSTkqlJ9E4cxWEiR/28HILpy11QMNrH54T0fT5yNC8zYZXwmZ+G3yPx0DHBHIteYSWmzTPPubViSMtYWErotCuNXmWHZskRA/ZhzcJ/urB53URpROwcE8/PBU9JdMbWN9o+nSVl936PzDS1i1W4HW2FFEpPr/2RHYd5NhkyUtOwSCduY/omK9CA7K1E1yxdFZ7NIK9cI4UVoGdkOnXgqJxKby67XMcv6lhyaGvkbKYORZ/yikl9AzFXmY4Ul931QRzzKrQIVSzc="
    - secure: "Ve5NRoWLimws6ZGWJeqK8O3vqb4VJ3haBjceJorf7jyx1nDJFmqy5xXUA6FzG+pl1ykBmbB84brBkgYrxnSfexdotxsL0+nv14OUntDIjXqIQRuCP8Y5ZADrULoQBDQQQsDxIg2ugcIBU05lk0hDMqQxh+NdPzrmr/I+2UD7Cq0O99Esjo6LcDf9XVaFq+Suz62pKJq4RTD02PXH4xmj7nZCGEg8IJpRsYw5zaJ5jQPdMmxX4YH0gqlHQGcmrxV4QEBpB3NQnAEp9VcEBWE9uHsTtP/y2xv3mVoL995pMH1GKPWtzw4evgScEWhH+jIAK6VDH8HuAm8tSqYDgNWKBx88SWn+gQnzwLZ09HFHJtELHQimDT+Tp7MeO4ov7jnlGJVDH/HjAcJC5RiOi7hbiNRygwFP2qaowS1Xbp+nCRROUIioeVh//sCA3TJaooEw51wF9TiokxMkA1oI5hbSAH0C4iRK2PEp1qM/b3yclln2xJWRtoeR8Evo0kCWq/JBm9n+pXsw+0WSirz9Z8HZ6tllhPH3CV0tuj8pztkytwAbRIZA59xfQq/isO6JWSax8RNj7mwSLa7lyupCYjjozT6CFoelR7aJb3q2FBBeEjUSCj8UmWA94oDJcnNaijucrm6OEPo+KwzHTztEAHOcD9lvjMYWHPjLQT1AmGQfDEo="
    - secure: "mR6Puzm9jMnmCnHTt0NQgwITW/l3IvtNluSe5S+ltUqFalIbQm36IGOFrbdleJxsK4EpDaVB3Mr9M2huQ3UyZD/5KkhB0Hod5ShwKsxV9VWlVh4l5qJVP3oNWCdnqz10USvCJbNuRlpyX3OgwuS5nH+AHSqS8WMRMqiCvW7X/U52HvaCMkTo6EVeX0o8AQ0sxFMKikFKQsGVmVWd7cVBMKb3hGOK9fYAN4H1i53vlI50SdiVxbNNrUocB2afkNhPrtFk/l4uCUa2xQN8po7IvYgD6+zPfRbN8pr6yaW9/QJfAMRsgaF/+xxEH89FgnF6Pbe+YIzMpCCA9tRrYkTRIXoYskOtNclp7rbn7+i34ql5W3S4E3n+ORsx4GMWwiHlclhQCDqtbuLm+0blmN7V2A0Zf6VJ7AX58wG3a68MqgkeC8jm14AoLYWbvGSz2T3mtaRLR+Wf3kR4uWq/nA7+06dKOqJBDUoOh/pdh4gQY4XpKJevsgDkLo/jG534lbposEnEHXsCHEwY7UL7+UWj0dq1ziVMPuxtXJF+s3UFT/X7K0oCsyGAtqp+HBw3uSRjBHjTf06UMi7cZDlJiCr8eRpSia3yNOwpPyHoInw5fGN4mn2KyCvSKcd0vnCUM1yV53rkzGKyduhwtdIU39OUych2o22HeqvBvrzIG61XMqI="

language: python
python:
  - "3.6"
install:
  - pip install pipenv
  - pip install twine
  - pip install codacy-coverage
  - pipenv install
  - pipenv install --dev
script:
  - mypy --ignore-missing-imports .
  - pipenv run pytest -v -n 2 -s --cov=./
  - coverage xml
  - python-codacy-coverage -r coverage.xml
after_success:
  - pipenv run pipenv_to_requirements
  - python setup.py sdist bdist_wheel
  - if [ "$TRAVIS_BRANCH" = "dev" ]; then twine upload -u $PYPI_USERNAME -p $PYPI_PASSWORD --repository-url https://test.pypi.org/legacy/ dist/*; fi
  - if [ "$TRAVIS_BRANCH" = "master" ]; then twine upload -u $PYPI_USERNAME -p $PYPI_PASSWORD dist/*; fi
